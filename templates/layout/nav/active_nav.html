{% comment %}
  Active Navigation Component
  =========================
  
  Purpose:
  Updates navigation links to reflect the current page without using JavaScript.
  This component is designed to be included as an OOB swap in HTMX responses.
  
  Context Variables:
  - active_section: The current active section (e.g., 'home', 'teams', 'todos')
  
  Usage:
  {% include "layout/nav/active_nav.html" with active_section="todos" %}
  
  HTMX OOB Support:
  This component should be included in HTMX responses to update the navigation state.
{% endcomment %}

<div id="nav-active-marker" hx-swap-oob="true">
  <script>
    // Simple utility to mark the active navigation item
    document.addEventListener('DOMContentLoaded', function() {
      // Reset all active states
      document.querySelectorAll('nav a').forEach(function(link) {
        link.classList.remove('text-blue-600', 'bg-blue-50');
        link.classList.add('text-gray-700', 'hover:text-blue-600', 'hover:bg-blue-50');
      });
      
      // Set active state based on current section
      const activeSection = "{{ active_section }}";
      let selector = "";
      
      switch(activeSection) {
        case "home":
          selector = 'nav a[href="/"]';
          break;
        case "teams":
          selector = 'nav a[href*="/teams"]';
          break;
        case "todos":
          selector = 'nav a[href*="/todos"]';
          break;
        case "account":
          selector = 'nav a[href*="/account"]';
          break;
        case "admin":
          selector = 'nav a[href*="/admin"]';
          break;
        default:
          // No active item
          return;
      }
      
      // Apply active state
      document.querySelectorAll(selector).forEach(function(link) {
        link.classList.remove('text-gray-700', 'hover:text-blue-600', 'hover:bg-blue-50');
        link.classList.add('text-blue-600', 'bg-blue-50');
      });
    });
  </script>
</div>